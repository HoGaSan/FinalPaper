---
output:
  pdf_document:
    latex_engine: xelatex
    number_sections: yes
---


```{r 240-setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, comment=NA)
source("../90-UserDefinedFunctions.R")
suppressPackageStartupMessages(loadLibraries())
suppressPackageStartupMessages(readConfigFile(FALSE))
```


### Data Exploration Report

Keeping the length of this section reasonable, the exploration report shown here contains the data from 1990 (except for the data summary). The report for the rest of the data is in the appendix of the final document.

#### Animal Strike Data

The first summary table shows the number of distinct items for each year regarding the Airline operators, Aircraft, Aircraft types, Aircraft mass types, and Engine types, which have been reported as being affected in an animal strike. (Please note that the data for 2016 is available until 30-4-2016.)

```{r table-01, results = 'asis'}

dataDir <- getDataDir()

RDSExpFileName <- "01_EXP_Animal_Strikes.rds"
  
RDSExpFile <- paste(dataDir,
                      "/",
                      RDSExpFileName,
                      sep = "")

summaryData <- readRDS(file = RDSExpFile)

firstSetOfColumns <- c("dataYear","numberOfRecords","factorOPID","factopATYPE","factorAC_CLASS","factorAC_MASS","factorTYPE_ENG")

kable(summaryData[, ..firstSetOfColumns], col.names = c("Year",
                                 "# of reports",
                                 "Operators",
                                 "Aircraft",
                                 "Aircraft type",
                                 "Aircraft mass type",
                                 "Engine type"),
      align = "c")

```

The second summary table shows the number of distinct items for each year regarding the Time of day, Airports, States, Phase of flight, weather conditions (Sky and Precipitation), and the flag for showing if the pilot has been warned or not about birds / wildlife in the reports. (Please note that the data for 2016 is available until 30-4-2016.)

```{r table-02, results = 'asis'}

secondSetOfColumns <- c("dataYear","factorTIME_OF_DAY","factorAIRPORT_ID","factorSTATE","factorPHASE_OF_FLT","factorSKY","factorPRECIP","factorWARNED")


kable(summaryData[, ..secondSetOfColumns], col.names = c("Year",
                                 "Time of day",
                                 "Airports",
                                 "States",
                                 "Phase of flight",
                                 "Sky",
                                 "Precipitation",
                                 "Warned"),
      align = "c")

```


The following graphs show the distributions of some of the selected distinct items summarized in the tables above.

```{r imageMangement}

imageLocation <- getDocInputDir()
DataField <- c("AC_CLASS", "AC_MASS", "TYPE_ENG", "TIME_OF_DAY", "PHASE_OF_FLT", "SKY", "PRECIP")

for (i in 1:7) {
  targetFileName <- paste("/1990_AnimalStrike_", DataField[i], ".png", sep="")
  targetFile <- paste(imageLocation, targetFileName, sep="")
  if (file.exists(targetFile) == TRUE){
    cat(i, getwd(), "\n")
    cat(targetFile, "found!\n")
    cat(str(targetFile), "\n")
    
    #img <- readPNG(targetFile)
    #grid.raster(img)
    #print(img)
    
    
    
    #knitr::include_graphics(paste("./Input", targetFileName, sep=""))
    knitr::include_graphics(targetFile)
    
    knitr::include_graphics("H:/!!Code/R/FinalPaper/Documents/Input/1990_AnimalStrike_AC_CLASS.png")
    
    
  } else {
    cat(targetFile, " not found!")
  }
     
}

```


#### Flight Data


TODO

<!--
This task tackles the data mining questions, which can be addressed using querying, visualization, and reporting. For instance, a data analyst may query the data to discover the types of products that purchasers in a particular income group usually buy. Or the analyst may run a visualization analysis to uncover potential fraud patterns. The data analyst should then create a data exploration report that outlines first findings, or an initial hypothesis, and the potential impact on the remainder of the project.
-->
